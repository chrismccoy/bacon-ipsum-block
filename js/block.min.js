(function(wp){"use strict";var registerBlockType=wp.blocks.registerBlockType;var el=wp.element.createElement;var useState=wp.element.useState;var InspectorControls=wp.blockEditor.InspectorControls;var RichText=wp.blockEditor.RichText;var useBlockProps=wp.blockEditor.useBlockProps;var PanelBody=wp.components.PanelBody;var SelectControl=wp.components.SelectControl;var RangeControl=wp.components.RangeControl;var ToggleControl=wp.components.ToggleControl;var Button=wp.components.Button;var Spinner=wp.components.Spinner;var Placeholder=wp.components.Placeholder;var __=wp.i18n.__;var API_BASE_URL="https://baconipsum.com/api/";var blockIcon=el("svg",{width:24,height:24,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false"},el("path",{fill:"currentColor",d:"M2 4c1.5 1 2.5-1 4 0s2.5-1 4 0 2.5-1 4 0 2.5-1 4 0 2.5-1 4 0v3c-1.5-1-2.5 1-4 0s-2.5 1-4 0-2.5 1-4 0-2.5 1-4 0-2.5 1-4 0V4z"}),el("path",{fill:"currentColor",d:"M2 10c1.5 1 2.5-1 4 0s2.5-1 4 0 2.5-1 4 0 2.5-1 4 0 2.5-1 4 0v3c-1.5-1-2.5 1-4 0s-2.5 1-4 0-2.5 1-4 0-2.5 1-4 0-2.5 1-4 0v-3z"}),el("path",{fill:"currentColor",d:"M2 16c1.5 1 2.5-1 4 0s2.5-1 4 0 2.5-1 4 0 2.5-1 4 0 2.5-1 4 0v3c-1.5-1-2.5 1-4 0s-2.5 1-4 0-2.5 1-4 0-2.5 1-4 0-2.5 1-4 0v-3z"}));function fetchBaconIpsum(type,paras,startWithLorem){var url=API_BASE_URL+"?format=json";url+="&type="+encodeURIComponent(type);url+="&paras="+encodeURIComponent(paras);if(startWithLorem){url+="&start-with-lorem=1"}return fetch(url).then(function(response){if(!response.ok){throw new Error("API request failed with status: "+response.status)}return response.json()})}function paragraphsToHtml(paragraphs){return paragraphs.map(function(para){return"<p>"+para+"</p>"}).join("")}function BaconIpsumEdit(props){var attributes=props.attributes;var setAttributes=props.setAttributes;var type=attributes.type;var paras=attributes.paras;var startWithLorem=attributes.startWithLorem;var content=attributes.content;var loadingState=useState(false);var isLoading=loadingState[0];var setIsLoading=loadingState[1];var errorState=useState(null);var error=errorState[0];var setError=errorState[1];var blockProps=useBlockProps({className:"bacon-ipsum-block-editor"});function generateBacon(){setIsLoading(true);setError(null);fetchBaconIpsum(type,paras,startWithLorem).then(function(data){var htmlContent=paragraphsToHtml(data);setAttributes({content:htmlContent});setIsLoading(false)}).catch(function(err){setError(err.message);setIsLoading(false)})}function onContentChange(value){setAttributes({content:value})}function onTypeChange(value){setAttributes({type:value})}function onParasChange(value){setAttributes({paras:value})}function onStartWithLoremChange(value){setAttributes({startWithLorem:value})}var inspectorControls=el(InspectorControls,null,el(PanelBody,{title:__("Bacon Settings","bacon-ipsum"),initialOpen:true},el(SelectControl,{label:__("Meat Type","bacon-ipsum"),value:type,options:[{label:__("All Meat","bacon-ipsum"),value:"all-meat"},{label:__("Meat and Filler","bacon-ipsum"),value:"meat-and-filler"}],onChange:onTypeChange,help:__("Choose pure meat or meat mixed with lorem ipsum filler.","bacon-ipsum")}),el(RangeControl,{label:__("Number of Paragraphs","bacon-ipsum"),value:paras,onChange:onParasChange,min:1,max:10,help:__("Select between 1 and 10 paragraphs.","bacon-ipsum")}),el(ToggleControl,{label:__('Start with "Bacon ipsum dolor sit amet"',"bacon-ipsum"),checked:startWithLorem,onChange:onStartWithLoremChange}),el(Button,{variant:"secondary",onClick:generateBacon,disabled:isLoading,isDestructive:content?true:false,style:{marginTop:"10px"}},isLoading?__("Generating...","bacon-ipsum"):content?__("Regenerate (Replaces Content)","bacon-ipsum"):__("Generate Bacon","bacon-ipsum"))));var blockContent;if(isLoading){blockContent=el("div",{style:{textAlign:"center",padding:"40px"}},el(Spinner),el("p",null,__("Sizzling up some bacon...","bacon-ipsum")))}else if(error){blockContent=el(Placeholder,{icon:blockIcon,label:__("Bacon Ipsum","bacon-ipsum"),instructions:__("Error fetching bacon: ","bacon-ipsum")+error},el(Button,{variant:"primary",onClick:generateBacon},__("Try Again","bacon-ipsum")))}else if(!content){blockContent=el(Placeholder,{icon:blockIcon,label:__("Bacon Ipsum","bacon-ipsum"),instructions:__("Generate meaty lorem ipsum placeholder text. Once generated, you can edit the text directly.","bacon-ipsum")},el("div",{style:{display:"flex",flexDirection:"column",gap:"10px",width:"100%",maxWidth:"300px"}},el(SelectControl,{label:__("Meat Type","bacon-ipsum"),value:type,options:[{label:__("All Meat","bacon-ipsum"),value:"all-meat"},{label:__("Meat and Filler","bacon-ipsum"),value:"meat-and-filler"}],onChange:onTypeChange}),el(RangeControl,{label:__("Paragraphs","bacon-ipsum"),value:paras,onChange:onParasChange,min:1,max:10}),el(ToggleControl,{label:__("Start with Lorem","bacon-ipsum"),checked:startWithLorem,onChange:onStartWithLoremChange}),el(Button,{variant:"primary",onClick:generateBacon},__("Generate Bacon Ipsum","bacon-ipsum"))))}else{var meatTypeLabel=type==="all-meat"?"ðŸ¥“ "+__("All Meat","bacon-ipsum"):"ðŸ¥“ "+__("Meat & Filler","bacon-ipsum");var parasLabel=paras+" "+(paras>1?__("paragraphs","bacon-ipsum"):__("paragraph","bacon-ipsum"));blockContent=el("div",{className:"bacon-ipsum-content-wrapper"},el(RichText,{tagName:"div",className:"bacon-ipsum-content",multiline:"p",value:content,onChange:onContentChange,placeholder:__("Your bacon ipsum will appear here...","bacon-ipsum")}),el("div",{style:{marginTop:"15px",paddingTop:"15px",borderTop:"1px dashed #ccc",display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"}},el(Button,{variant:"secondary",onClick:generateBacon,disabled:isLoading,isSmall:true,isDestructive:true},__("Regenerate","bacon-ipsum")),el("span",{style:{fontSize:"12px",color:"#757575"}},meatTypeLabel," â€¢ ",parasLabel),el("span",{style:{fontSize:"11px",color:"#999",fontStyle:"italic",marginLeft:"auto"}},__("Click text above to edit","bacon-ipsum"))))}return el("div",blockProps,inspectorControls,blockContent)}function BaconIpsumSave(props){var content=props.attributes.content;var blockProps=useBlockProps.save({className:"bacon-ipsum-block"});return el("div",blockProps,el(RichText.Content,{tagName:"div",className:"bacon-ipsum-content",multiline:"p",value:content}))}registerBlockType("bacon-ipsum/generator",{title:__("Bacon Ipsum","bacon-ipsum"),description:__("Generate meaty lorem ipsum placeholder text from baconipsum.com. Content is editable after generation.","bacon-ipsum"),category:"text",icon:blockIcon,keywords:[__("lorem","bacon-ipsum"),__("ipsum","bacon-ipsum"),__("placeholder","bacon-ipsum"),__("bacon","bacon-ipsum"),__("meat","bacon-ipsum"),__("dummy","bacon-ipsum"),__("text","bacon-ipsum")],supports:{html:false,align:["wide","full"]},example:{attributes:{content:"<p>Bacon ipsum dolor amet hamburger pork loin shoulder "+"swine. Turducken salami ham hock bacon strip steak "+"bresaola.</p><p>Landjaeger buffalo tongue pork chop. "+"Kielbasa ham hock frankfurter, brisket t-bone strip "+"steak hamburger.</p>"}},edit:BaconIpsumEdit,save:BaconIpsumSave})})(window.wp);
